devise visual query interface



visual query interface

this section discusses the visual query interface of devise:


introduction
session
how to represent data.
what to visualize.
where to place graphics.
command summary.


introduction

in a database environment, users ask their questions by formulating
queries over the underlying database. the query output are the
answers to these questions. the same questions can be asked over and over 
on different sets of input data. the same principle applies when graphics
is used to represent data. the difference is that visual queries are
formulated using a graphical user interface, against graphical data.

when formulating visual queries, users start with a set of input data.
graphical representations of the input data are generated, perhaps
through extensive experimentations. users would navigate the data to look for
places of interest. sometimes users might need additional help by looking
at the original data represented by the graphics. the state
of the visualization environment forms a visual query. just like
a database query, the visual query can be saved, and applied over and
over to different sets of input data.

a visual query is constructed by manipulating the system components
in devise to create component instances and interconnections.  these
components are derived from a model of
visualization. the visual query interface manipulates these
components to allow the user to specify what data is to be visualized,
how data is to be visualized, and where to place the graphics on the
display.

session

the state of each visual query is stored as a session. sessions are
accessed from the session menu, with the following menu items:


open: restore a previously saved visual query to its original state.
open as template: apply a previously saved visual query to a different
set of input data. the user selects the new input data when session is
restored.
close: close current session.
save: save visual query to file, to be restored later.
save as: save visual query under a different name.
save as template: save visual query as a template.
print: print contents of window or save as postscript.
quit: quit devise.


how to represent data

the following commands are used to specify what the user wants
to visualize:

define mapping
edit mapping
controlling shape size


define mapping
the ``visualize/define'' command lets the user define new data
streams (tdata) and new visualizations to the system. the steps
required to create a new visualization are summarized here:

select a data stream by pulling down the source selector, or select
the open... command at the bottom of the selector to define a new data
stream.
click on auto... to run the automatic mapping utility.
select the attributes of visualization from the dialog box, including
the x attribute, one or more y attributes, window name and layout, and
other options.
click on ok to create the new visualization.


edit mapping

the ``view/edit mapping'' menu command allows the user to experiment
with the mapping of a gdata in the view. a dialog box appears,
allowing the user to edit the mapping. the dynamic nature of editing
the mapping is valuable during data exploration because the
effectiveness of graphics may vary for different locations in the
data, and for different zoom factors as well. the user can change all
attributes of the visualization, including the x, y, color, shape,
size, pattern, and orientation attributes. optional parameters, such
as shape width and height, can also be defined.

controlling shape pixel size

sometimes the size of shapes are so small that they appear as single
pixels when drawn inside a view:



it is often desirable to accentuate these shapes by enlarging their
sizes to be bigger than a single pixel:



controlling the actual size of pixel sized shapes is done via
keyboard commands directed at a view. the '+' key increases the
size of shapes, while the '-' key decreases the size of the shapes.

what to visualize

there are many ways to specify what the user wants to look at:


control panel widgets
layout versus display mode
axes
mouse and keyboard events
history window
visual link
cursor
switch tdata
duplicate window
data querying


control panel widgets



the widgets on the control panel are mainly used for navigating the
data. the ``current view'' text widget



displays the name of the view that the user wishes to
navigate. user commands initiated from the control panel widgets are
applied to the current view. the user selects a view as the current
view by clicking inside its boundary with the left mouse button.

interactions with widgets for navigation are translated into changing
the visual filter of the current view. the widgets used for navigation
are as follows:


the arrow widgets are used to scroll left, 
right, up, and down. the 4 widgets around the arrows are for zooming in
and out in the x or y directions.
the text widgets are used for
editing the new x and/or y ranges. clicking the `use' button
changes the view's visual filter. the `undo-edit' button is used to undo
the editing.
the `back one' button goes back one step in the history of changes
to the current view's visual filter. clicking `use' moves back one step,
while clicking `undo' cancels the change.
clicking the `history' widget brings up the history window.


layout vs. display modes

devise has two modes of operation:layout and display modes. users
toggle between these two modes by clicking at the 
button. in the layout mode, the user constructs mappings and views and
decides where to place views in windows without having the graphics
update in the window. the windows are eventually updated when the user
switches into display mode.

placing devise in the layout mode is a time saver when large amounts
of data are involved. the layout mode allows the user to construct a visual
query without waiting for the graphics to be updated. otherwise, adding a 
view in a window may cause all other views already in the same window, 
together with linked views in other windows, to be updated simultaneously.
may take a long time.

axes

the user can turn the display of view axes on/off. this is accessed
through the ``view/toggle x axis'' and the ``view/toggle y axis''
menus.

mouse and keyboard events

the user can use the following mouse commands:


click anywhere in a view with the left button to select the view
as the current view.
click in a view with the middle button to query
the data that lies under the graphical object closest to the mouse
location.
click on left, right, up, or down arrow in the control panel to
scroll a view.
click on zoom in or out buttons in control panel to zoom in or
out of a view in the x or y direction.
draw a rectangle with the left mouse button pressed in a view to
zoom only in the x axis (best for bar graphs).
draw a rectangle with the right mouse button pressed in a view to
zoom in the x and y axes (best for scatter plots).


the following keyboard commands are available:


press number 4, 6, 8, or 2 to scroll view left, right, up, or down.
numbers correspond to arrows on a numeric keypad with numlock on.
press number 7 or 9 to zoom in or out of a view in the x direction.
press number 1 or 3 to zoom in or out of a view in the y direction.
press s to toggle symbol display on or off.
press v to toggle connector display on or off.


history window



the history window is accessed by clicking the `history' button
on the control panel. a history of changes to the visual filter
of the current view are displayed.

users can go back to places previously visited by clicking in a
history window entry, and then clicking the `use' button on the
control panel.  users can also mark or unmark places of interest by
clicking in the `mark' column of the history window. the marked
entries are preceded by an `*'. because the history window has a
finite size, old history entries are replaced by new ones after the
size of the history window reaches it maximum. however, marked entries
are never replaced.

visual link

visual links are used to link the axes of multiple views, so that
scrolling or zooming one synchronously scrolls or zooms all linked
views. the ``view/link'' menu brings up a dialog box that allows the
user to select a link for the current view. the dialog box also allows
the user to create new links, and to examine views that belong to
existing links. the ``view/unlink'' menu allows the user to dissociate
a view from a link.

cursor

click here for an example.

cursors are used to display the boundaries of one view relative to
another. clicking in the destination view moves the cursor to the
clicked region, at the same time changing the visual filter of the
source view. the cursor menu is used to access cursors:


create: creates a cursor.
delete: deletes a cursor.
set source: set the source view for the cursor.
set destination: set the destination view for the cursor.


switch tdata

as the user experiments with the mapping of a gdata, and navigates
through scrolling or zooming, the user might come across a location of
interest in the data. there are cases where the user wants to see what
the same location looks like for a different set of input data. the is
accomplished through the ``view/switch tdata'' menu command.  this is
a time save by eliminating the need to use the mapping definition again, when the only
difference is that a different input is being used.

duplicate window

consider a window consisting of a set of linked views.  as the user
navigates the views, he or she might come across a location of
interest. one way to save this location is to mark it in the history window. however, the user may also want to
compare two separate locations. this is most easily accomplished by
making a copy of the window so that the two may be placed side by side
for comparison. this is done by choosing the ``window/duplicate
window'' menu command.

after duplicating the window, the user is provided with two
identical windows. the user can use the first window as a reference
point, while using the second window for further navigation to find
other places of interest.

data querying

as the user navigates the data, there might be places where
information about the records used to generate the graphics becomes
important for understanding. pressing down on the middle button may be
used to query the data that underly the mouse. as a result, a pop-up
window appears, giving the user information about the data records,
including attribute names and values. (click for an example) in the event that there is too much
information to fit in a pop-up window, the information is displayed
textually on the user's terminal.

where to place graphics

views and windows are the means through which the user decides to
place graphics. first, views can be removed from windows to reduce
clutter, or be moved to other windows for side by side comparison with
other views. these functions are accessed through the ``view/remove
from window'' and ``view/bring back to window'' menus. when placed
within the same window, the positions of views may also be swapped
using the ``view/swap position'' menu.

windows are responsible for arranging views inside their
boundaries.  different placement strategies may be
implemented. currently, devise offers three window layouts:
tiled/automatic, vertical, and horizontal. in addition, devise relies
on the window manager of particular implementations for moving a
window to a different locations on the display, for changing the size
of a window, or for turning the window into an icon.

command summary

menus

there are five groups of menus: session, visualize, view, cursor, and
window. we now describe each one in turn, beginning with the session
menu. recall that the state of each visual query
is a session. the session menu deals with
saving and restoring visual queries:


open: restore a previously saved visual query to its original state.
open as template: apply a previously saved visual query to a different
set of input data. the user selects the new input data when session is
restored.
close: close current session.
save: save session under the default name.
save as: save session under a different name.
save as template: save visual query as a template.
print: print contents of window or save as postscript.
quit: quit devise.


the ``visualize'' menu is used to manage data streams and define
visualizations. see here for more
information.

the ``view'' menu is used to operate on views. most of the menu
items require that the current view be specified by clicking in the
view with the left mouse button. the menu items are:


edit mapping:edit mapping for current view.
switch tdata: apply the same mapping that 
creates the current view to a different input data.
swap position: swap the positions of the last two views selected as
current view.
move to window: move current view to another window.
remove from window: remove current view from its window.
bring back to window: bring back a view that was removed earlier.
link: select a visual link for current view.
unlink: remove current view from a visual link.
toggle x axis: toggle x axis display on/off.
toggle y axis: toggle y axis display on/off.
toggle statistics: toggle statistics display (min/max/avg) on/off.
show kgraph: control kiviat graph displays.
title: set, edit, or delete view titles.


the ``cursor'' menu is used to operate on cursors:


create: create a cursor.
delete: delete a cursor.
set source: make the current view the source of the cursor.
set destination: make the current view the destination of the cursor.


the ``window'' menu operates on windows:


layout: change the layout of a window.
remove: remove an empty window.
duplicate: make a copy of current window.
help: open up the help window to display online documentation.
history: open up the history window.


widgets

the control panel widgets are as follows:


mode button: toggle between layout and display modes.
current view widget: displays the name of the current view.
xlow, xhigh, ylow, and yhigh: displays the boundaries
	of the current view. the widgets may be edited.
use: makes the edited xlow/xhigh/ylow/yhigh the new visual
	filter for the current view.
undo-edit: undo the editing of the xlow/xhigh/ylow/yhigh widgets.
back one: move back to the previous visual filter by changing
	xlow/xhigh/ylow/yhigh widgets. the user has to click `use' to
	initiate the changes.
history: bring up the history window.
navigations buttons on the lower left: for scrolling
	left, right, up, down, zoom in x, zoom in y, zoom out x,
	and zoom out y.


the history window widgets are as follows:

mark: toggles an entry between marked and unmarked state. in the
	marked state, the entry is never thrown away as the history buffer
	fills up.
xlow/xhigh/ylow/yhigh: click here to transfer this
	entry of the history window to the xlow/xhigh/ylow/yhigh
	widgets on the control panel. then click `use' on the control panel to
	go back to this history entry.
close: close the history window.